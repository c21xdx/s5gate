<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S5Gate - SOCKS5 Proxy Gateway</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🔐 S5Gate</h1>
      <p class="subtitle">SOCKS5 Proxy Gateway</p>
    </header>

    <!-- SOCKS5 配置卡片 -->
    <div class="card socks5-card">
      <h2>📡 SOCKS5 配置</h2>
      <div class="dual-config">
        <div class="config-box">
          <h3>🌐 直连 (Direct)</h3>
          <div class="config-item">
            <label>端口</label>
            <span id="socks5-port-direct">1080</span>
          </div>
          <button class="btn btn-small btn-copy" onclick="copySocks5Config('direct')">复制</button>
        </div>
        <div class="config-box vpn-box">
          <h3>🔒 VPN</h3>
          <div class="config-item">
            <label>端口</label>
            <span id="socks5-port-vpn">1081</span>
          </div>
          <div class="vpn-status" id="vpn-status">未连接</div>
          <button class="btn btn-small btn-copy" onclick="copySocks5Config('vpn')">复制</button>
        </div>
      </div>
      <div class="config-common">
        <div class="config-item">
          <label>用户名</label>
          <span id="socks5-user">-</span>
        </div>
        <div class="config-item">
          <label>密码</label>
          <span id="socks5-pass" class="password">-</span>
          <button class="btn-small" onclick="togglePassword()">👁️</button>
        </div>
      </div>
    </div>

    <!-- 连接监控卡片 -->
    <div class="card connections-card">
      <div class="card-header">
        <h2>📊 当前连接</h2>
        <span id="conn-count" class="conn-badge">0</span>
      </div>
      <div id="connections-list" class="connections-list">
        <div class="no-connections">暂无连接</div>
      </div>
    </div>

    <!-- 黑名单卡片 -->
    <div class="card blacklist-card">
      <div class="card-header">
        <h2>🚫 IP 黑名单</h2>
        <span id="blacklist-count" class="blacklist-badge">0</span>
      </div>
      <div class="blacklist-input">
        <input type="text" id="block-ip-input" placeholder="输入 IP 地址">
        <button class="btn btn-small btn-danger" onclick="blockIPManual()">封禁</button>
      </div>
      <div id="blacklist-list" class="blacklist-list">
        <div class="no-blacklist">无封禁 IP</div>
      </div>
    </div>

    <!-- VPN 状态卡片 -->
    <div class="card status-card">
      <h2>🔒 VPN 状态</h2>
      <div class="status-grid">
        <div class="status-item">
          <label>状态</label>
          <span id="vpn-conn-status" class="mode-badge">-</span>
        </div>
        <div class="status-item" id="vpn-server-container" style="display:none">
          <label>节点</label>
          <span id="vpn-server">-</span>
        </div>
      </div>
      <div id="vpn-ip-info" class="vpn-ip-info" style="display:none">
        <div class="ip-info-grid">
          <div class="ip-info-item">
            <label>IP</label>
            <span id="vpn-ip">-</span>
          </div>
          <div class="ip-info-item">
            <label>国家/地区</label>
            <span id="vpn-location">-</span>
          </div>
          <div class="ip-info-item">
            <label>ISP</label>
            <span id="vpn-isp">-</span>
          </div>
          <div class="ip-info-item">
            <label>组织</label>
            <span id="vpn-org">-</span>
          </div>
        </div>
      </div>
      <div class="status-actions">
        <button class="btn btn-refresh" onclick="refreshStatus()">🔄 刷新</button>
        <button class="btn btn-disconnect" id="btn-disconnect" onclick="disconnect()" style="display:none">❌ 断开 VPN</button>
      </div>
    </div>

    <!-- VPNGate 节点列表 -->
    <div class="card servers-card">
      <div class="card-header">
        <h2>🌐 VPNGate 节点</h2>
        <button class="btn btn-small" onclick="refreshServers(true)">🔄 刷新</button>
      </div>
      <div class="servers-info">
        <span id="servers-count">-</span>
        <span id="cache-info" class="cache-info"></span>
      </div>
      <div id="servers-list" class="servers-list">
        <div class="loading">加载中...</div>
      </div>
    </div>

    <!-- 页脚 -->
    <footer>
      <button class="btn-link" onclick="logout()">登出</button>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
